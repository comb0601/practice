<Window x:Class="Lesson03_PerformanceCounters.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="WPF Performance Counters - Module 01 Lesson 03"
        Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#F0F0F0">

    <Window.Resources>
        <Style x:Key="MetricTextBlock" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#0078D4"/>
            <Setter Property="Margin" Value="5,2"/>
        </Style>

        <Style x:Key="LabelTextBlock" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="Margin" Value="5,2"/>
        </Style>

        <Style x:Key="HeaderTextBlock" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#0078D4"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="White" Padding="15" CornerRadius="5" Margin="0,0,0,10">
            <StackPanel>
                <TextBlock Text="Windows Performance Counters Monitor"
                          FontSize="24" FontWeight="Bold"
                          Foreground="#0078D4" Margin="0,0,0,5"/>
                <TextBlock Text="Learn how to monitor system and custom performance counters in real-time"
                          FontSize="14" Foreground="#666666"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left Column - System Performance Counters -->
                <StackPanel Grid.Column="0" Margin="0,0,5,0">

                    <!-- System Performance Counters -->
                    <GroupBox Header="System Performance Counters">
                        <StackPanel>
                            <TextBlock Text="Monitor built-in Windows performance counters"
                                      Style="{StaticResource LabelTextBlock}"
                                      TextWrapping="Wrap" Margin="0,0,0,10"/>

                            <!-- CPU Usage -->
                            <Border Background="White" Padding="10" Margin="0,5" CornerRadius="3">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="CPU Usage"
                                              Style="{StaticResource LabelTextBlock}"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" x:Name="CpuUsageText"
                                              Text="0.0%" Style="{StaticResource MetricTextBlock}"/>

                                    <ProgressBar Grid.Row="1" Grid.ColumnSpan="2"
                                               x:Name="CpuProgressBar"
                                               Height="20" Minimum="0" Maximum="100"
                                               Margin="5" Foreground="#0078D4"/>

                                    <TextBlock Grid.Row="2" Grid.ColumnSpan="2"
                                              Text="Processor \ % Processor Time"
                                              FontSize="10" Foreground="#999999" Margin="5,0"/>
                                </Grid>
                            </Border>

                            <!-- Memory Usage -->
                            <Border Background="White" Padding="10" Margin="0,5" CornerRadius="3">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Available Memory"
                                              Style="{StaticResource LabelTextBlock}"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" x:Name="MemoryText"
                                              Text="0 MB" Style="{StaticResource MetricTextBlock}"/>

                                    <ProgressBar Grid.Row="1" Grid.ColumnSpan="2"
                                               x:Name="MemoryProgressBar"
                                               Height="20" Minimum="0" Maximum="100"
                                               Margin="5" Foreground="#10893E"/>

                                    <TextBlock Grid.Row="2" Grid.ColumnSpan="2"
                                              Text="Memory \ Available MBytes"
                                              FontSize="10" Foreground="#999999" Margin="5,0"/>
                                </Grid>
                            </Border>

                            <!-- Disk Usage -->
                            <Border Background="White" Padding="10" Margin="0,5" CornerRadius="3">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Disk Time %"
                                              Style="{StaticResource LabelTextBlock}"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" x:Name="DiskTimeText"
                                              Text="0.0%" Style="{StaticResource MetricTextBlock}"/>

                                    <TextBlock Grid.Row="1" Grid.ColumnSpan="2"
                                              Text="PhysicalDisk(_Total) \ % Disk Time"
                                              FontSize="10" Foreground="#999999" Margin="5,0"/>
                                </Grid>
                            </Border>

                            <!-- Network Usage -->
                            <Border Background="White" Padding="10" Margin="0,5" CornerRadius="3">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Network Bytes/sec"
                                              Style="{StaticResource LabelTextBlock}"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" x:Name="NetworkText"
                                              Text="0 KB/s" Style="{StaticResource MetricTextBlock}"/>

                                    <TextBlock Grid.Row="1" Grid.ColumnSpan="2"
                                              Text="Network Interface \ Bytes Total/sec"
                                              FontSize="10" Foreground="#999999" Margin="5,0"/>
                                </Grid>
                            </Border>

                            <!-- Process Info -->
                            <Border Background="White" Padding="10" Margin="0,5" CornerRadius="3">
                                <StackPanel>
                                    <TextBlock Text="Current Process Metrics"
                                              FontWeight="Bold" Margin="0,0,0,5"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Working Set:"
                                                  Style="{StaticResource LabelTextBlock}"/>
                                        <TextBlock Grid.Row="0" Grid.Column="1" x:Name="WorkingSetText"
                                                  Text="0 MB" Style="{StaticResource MetricTextBlock}"/>

                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Private Bytes:"
                                                  Style="{StaticResource LabelTextBlock}"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1" x:Name="PrivateBytesText"
                                                  Text="0 MB" Style="{StaticResource MetricTextBlock}"/>

                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Thread Count:"
                                                  Style="{StaticResource LabelTextBlock}"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1" x:Name="ThreadCountText"
                                                  Text="0" Style="{StaticResource MetricTextBlock}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                </StackPanel>

                <!-- Right Column - Custom Performance Counters -->
                <StackPanel Grid.Column="1" Margin="5,0,0,0">

                    <!-- Custom Performance Counters -->
                    <GroupBox Header="Custom Performance Counters">
                        <StackPanel>
                            <TextBlock Text="Create and monitor custom application performance counters"
                                      Style="{StaticResource LabelTextBlock}"
                                      TextWrapping="Wrap" Margin="0,0,0,10"/>

                            <!-- Admin Warning -->
                            <Border Background="#FFF4CE" BorderBrush="#FFC107"
                                   BorderThickness="1" Padding="10" Margin="0,0,0,10">
                                <StackPanel>
                                    <TextBlock Text="⚠ Administrator Rights Required"
                                              FontWeight="Bold" Foreground="#F57C00"/>
                                    <TextBlock Text="Creating custom performance counters requires administrator privileges. Run this application as administrator."
                                              TextWrapping="Wrap" FontSize="11" Foreground="#666666"/>
                                </StackPanel>
                            </Border>

                            <!-- Counter Management -->
                            <Border Background="White" Padding="10" Margin="0,5" CornerRadius="3">
                                <StackPanel>
                                    <TextBlock Text="Counter Management"
                                              FontWeight="Bold" Margin="0,0,0,10"/>

                                    <Button x:Name="CreateCountersBtn"
                                           Content="Create Custom Counters"
                                           Click="CreateCountersBtn_Click"
                                           Margin="0,5"/>

                                    <Button x:Name="DeleteCountersBtn"
                                           Content="Delete Custom Counters"
                                           Click="DeleteCountersBtn_Click"
                                           Background="#D32F2F"
                                           Margin="0,5"/>

                                    <TextBlock x:Name="CounterStatusText"
                                              Text="Status: Counters not created"
                                              Style="{StaticResource LabelTextBlock}"
                                              Foreground="#666666"
                                              TextWrapping="Wrap"
                                              Margin="0,10,0,0"/>
                                </StackPanel>
                            </Border>

                            <!-- Custom Counter Values -->
                            <Border Background="White" Padding="10" Margin="0,5" CornerRadius="3">
                                <StackPanel>
                                    <TextBlock Text="Custom Counter Values"
                                              FontWeight="Bold" Margin="0,0,0,10"/>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0"
                                                  Text="Operations/sec:"
                                                  Style="{StaticResource LabelTextBlock}"/>
                                        <TextBlock Grid.Row="0" Grid.Column="1"
                                                  x:Name="OperationsPerSecText"
                                                  Text="0"
                                                  Style="{StaticResource MetricTextBlock}"/>

                                        <TextBlock Grid.Row="1" Grid.Column="0"
                                                  Text="Total Operations:"
                                                  Style="{StaticResource LabelTextBlock}"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1"
                                                  x:Name="TotalOperationsText"
                                                  Text="0"
                                                  Style="{StaticResource MetricTextBlock}"/>

                                        <TextBlock Grid.Row="2" Grid.Column="0"
                                                  Text="Avg Operation Time (ms):"
                                                  Style="{StaticResource LabelTextBlock}"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1"
                                                  x:Name="AvgOperationTimeText"
                                                  Text="0.00"
                                                  Style="{StaticResource MetricTextBlock}"/>

                                        <TextBlock Grid.Row="3" Grid.Column="0"
                                                  Text="Active Connections:"
                                                  Style="{StaticResource LabelTextBlock}"/>
                                        <TextBlock Grid.Row="3" Grid.Column="1"
                                                  x:Name="ActiveConnectionsText"
                                                  Text="0"
                                                  Style="{StaticResource MetricTextBlock}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Simulate Activity -->
                            <Border Background="White" Padding="10" Margin="0,5" CornerRadius="3">
                                <StackPanel>
                                    <TextBlock Text="Simulate Application Activity"
                                              FontWeight="Bold" Margin="0,0,0,10"/>

                                    <Button x:Name="SimulateOperationBtn"
                                           Content="Simulate Operation"
                                           Click="SimulateOperationBtn_Click"
                                           Background="#10893E"
                                           Margin="0,5"/>

                                    <Button x:Name="AddConnectionBtn"
                                           Content="Add Connection"
                                           Click="AddConnectionBtn_Click"
                                           Background="#10893E"
                                           Margin="0,5"/>

                                    <Button x:Name="RemoveConnectionBtn"
                                           Content="Remove Connection"
                                           Click="RemoveConnectionBtn_Click"
                                           Background="#D32F2F"
                                           Margin="0,5"/>
                                </StackPanel>
                            </Border>

                            <!-- Counter Information -->
                            <Border Background="#E3F2FD" Padding="10" Margin="0,10,0,0" CornerRadius="3">
                                <StackPanel>
                                    <TextBlock Text="Performance Counter Types"
                                              FontWeight="Bold" Margin="0,0,0,5"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="11" Foreground="#333333">
                                        <Run Text="• NumberOfItems32: Simple counter"/>
                                        <LineBreak/>
                                        <Run Text="• RateOfCountsPerSecond32: Rate per second"/>
                                        <LineBreak/>
                                        <Run Text="• AverageTimer32: Average time"/>
                                        <LineBreak/>
                                        <Run Text="• NumberOfItems64: Large number counter"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!-- Footer Controls -->
        <Border Grid.Row="2" Background="White" Padding="10" Margin="0,10,0,0" CornerRadius="5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button x:Name="StartMonitoringBtn"
                           Content="Start Monitoring"
                           Click="StartMonitoringBtn_Click"
                           Background="#10893E"
                           Width="150"/>

                    <Button x:Name="StopMonitoringBtn"
                           Content="Stop Monitoring"
                           Click="StopMonitoringBtn_Click"
                           Background="#D32F2F"
                           IsEnabled="False"
                           Width="150"/>
                </StackPanel>

                <TextBlock Grid.Column="1"
                          x:Name="StatusText"
                          Text="Ready to monitor performance counters"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Center"
                          FontStyle="Italic"
                          Foreground="#666666"/>

                <TextBlock Grid.Column="2"
                          x:Name="UpdateIntervalText"
                          Text="Update Interval: 1000ms"
                          VerticalAlignment="Center"
                          Foreground="#666666"/>
            </Grid>
        </Border>
    </Grid>
</Window>
