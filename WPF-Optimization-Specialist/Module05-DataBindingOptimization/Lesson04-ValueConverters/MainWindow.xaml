<Window x:Class="ValueConvertersDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ValueConvertersDemo"
        Title="Lesson 4: Value Converter Performance" Height="750" Width="1400"
        Background="#F5F5F5">
    <Window.Resources>
        <Style x:Key="HeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#2196F3"/>
            <Setter Property="Margin" Value="5,10,5,5"/>
        </Style>
        <Style x:Key="CodeStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Background" Value="#F5F5F5"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2196F3" CornerRadius="5" Padding="15" Margin="0,0,0,10">
            <StackPanel>
                <TextBlock Text="Value Converter Performance Optimization"
                          FontSize="24" FontWeight="Bold" Foreground="White"/>
                <TextBlock Text="Master efficient converter implementations with caching and performance best practices"
                          FontSize="14" Foreground="White" Opacity="0.9" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <TabControl Grid.Row="1" Margin="0,0,0,10">
            <!-- Tab 1: Naive vs Cached Converters -->
            <TabItem Header="Naive vs Cached">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Naive Converter -->
                    <GroupBox Grid.Column="0" Header="Naive Converter (Slow)">
                        <StackPanel>
                            <TextBlock Style="{StaticResource HeaderStyle}" Text="No Caching - Recreates Every Time"/>

                            <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Implementation:" FontWeight="Bold"/>
                                    <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap">
public object Convert(object value, ...)
{
    double val = (double)value;
    // Always creates new string!
    return $"${val:N2}";
}
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Test Naive Converter:" FontWeight="Bold"/>
                                    <TextBlock Text="Converting same value 1000 times:" FontSize="11" Margin="5,5,5,0"/>
                                    <Button Content="Run Naive Test" Click="TestNaiveConverter_Click" Margin="5"/>
                                    <TextBlock Text="{Binding NaiveConverterTime}"
                                             Foreground="Red" FontWeight="Bold" Margin="5"/>
                                    <TextBlock Text="{Binding NaiveConverterCalls, StringFormat='Convert() Calls: {0}'}"
                                             Foreground="Red" Margin="5"/>
                                    <TextBlock Text="{Binding NaiveAllocations, StringFormat='String Allocations: {0}'}"
                                             Foreground="Red" Margin="5"/>
                                </StackPanel>
                            </Border>

                            <Border Background="#FFEBEE" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="âŒ Problems:" FontWeight="Bold" Foreground="Red"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Recreates result every call
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Memory allocations on each conversion
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ CPU cycles wasted
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Poor performance for repeated values
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>

                    <!-- Cached Converter -->
                    <GroupBox Grid.Column="1" Header="Cached Converter (Fast)">
                        <StackPanel>
                            <TextBlock Style="{StaticResource HeaderStyle}" Text="Static Cache - Reuses Results"/>

                            <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Implementation:" FontWeight="Bold"/>
                                    <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap">
private static Dictionary&lt;double, string&gt; _cache
    = new();

public object Convert(object value, ...)
{
    double val = (double)value;
    if (!_cache.TryGetValue(val, out var result))
    {
        result = $"${val:N2}";
        _cache[val] = result; // Cache it!
    }
    return result;
}
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Test Cached Converter:" FontWeight="Bold"/>
                                    <TextBlock Text="Converting same value 1000 times:" FontSize="11" Margin="5,5,5,0"/>
                                    <Button Content="Run Cached Test" Click="TestCachedConverter_Click" Margin="5"/>
                                    <TextBlock Text="{Binding CachedConverterTime}"
                                             Foreground="Green" FontWeight="Bold" Margin="5"/>
                                    <TextBlock Text="{Binding CachedConverterCalls, StringFormat='Convert() Calls: {0}'}"
                                             Foreground="Green" Margin="5"/>
                                    <TextBlock Text="{Binding CachedAllocations, StringFormat='String Allocations: {0} (cached!)'}"
                                             Foreground="Green" Margin="5"/>
                                </StackPanel>
                            </Border>

                            <Border Background="#E8F5E9" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="âœ… Benefits:" FontWeight="Bold" Foreground="Green"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Caches results by input value
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ No repeated allocations
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ 10-100x faster for repeated values
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Minimal memory overhead
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <Border Background="#FFF3E0" CornerRadius="5" Padding="10" Margin="5">
                                <TextBlock Text="{Binding ConverterComparison}"
                                         TextWrapping="Wrap" FontWeight="Bold" Margin="5"/>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- Tab 2: Singleton vs Instance -->
            <TabItem Header="Singleton vs Instance">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <GroupBox Grid.Column="0" Header="Singleton Converter Pattern">
                        <StackPanel>
                            <TextBlock Style="{StaticResource HeaderStyle}" Text="Shared Instance"/>

                            <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Pattern:" FontWeight="Bold"/>
                                    <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap">
public class MyConverter : IValueConverter
{
    // Static singleton instance
    public static readonly MyConverter Instance
        = new MyConverter();

    private static Dictionary&lt;...&gt; _cache = new();

    public object Convert(...)
    {
        // Use static cache
    }
}

// Usage in XAML:
&lt;TextBlock Text="{Binding Value,
    Converter={x:Static local:MyConverter.Instance}}"/&gt;
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <Border Background="#E3F2FD" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="âœ… Advantages:" FontWeight="Bold"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Only one converter instance in memory
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Static cache shared across all bindings
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ No resource allocation in XAML
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Best memory efficiency
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Test Singleton Pattern:" FontWeight="Bold"/>
                                    <Button Content="Test Singleton Performance" Click="TestSingleton_Click" Margin="5"/>
                                    <TextBlock Text="{Binding SingletonResult}" TextWrapping="Wrap" Margin="5"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>

                    <GroupBox Grid.Column="1" Header="Instance Converter Pattern">
                        <StackPanel>
                            <TextBlock Style="{StaticResource HeaderStyle}" Text="Resource Instance"/>

                            <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Pattern:" FontWeight="Bold"/>
                                    <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap">
// In App.xaml:
&lt;Application.Resources&gt;
    &lt;local:MyConverter x:Key="MyConverter"/&gt;
&lt;/Application.Resources&gt;

// In Window XAML:
&lt;TextBlock Text="{Binding Value,
    Converter={StaticResource MyConverter}}"/&gt;

// Each converter has instance cache
public class MyConverter : IValueConverter
{
    private Dictionary&lt;...&gt; _cache = new();
}
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <Border Background="#FFF3E0" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="âš  Considerations:" FontWeight="Bold"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Each resource instance = separate cache
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ More memory if multiple instances
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Good for converter with state/parameters
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        â€¢ Easier XAML usage (StaticResource)
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Comparison:" FontWeight="Bold"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="11" Margin="5">
                                        <Run Text="Singleton:" FontWeight="Bold"/>
                                        Best for stateless converters with static caching
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="11" Margin="5">
                                        <Run Text="Instance:" FontWeight="Bold"/>
                                        Better for stateful converters or when using ConverterParameter
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <Border Background="#E8F5E9" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Recommendation:" FontWeight="Bold"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                        Use singleton pattern for simple, stateless converters. Use instance pattern when you need ConverterParameter or converter state.
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- Tab 3: Expensive Calculations -->
            <TabItem Header="Expensive Operations">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <GroupBox Grid.Row="0" Header="Caching Complex Calculations">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Border Grid.Column="0" Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="âŒ Without Caching:" FontWeight="Bold" Foreground="Red"/>
                                    <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap">
public object Convert(object value, ...)
{
    string input = (string)value;

    // Expensive calculation every time!
    var hash = ComputeHash(input);
    var result = ProcessData(hash);
    var formatted = FormatOutput(result);

    return formatted;
}
                                    </TextBlock>
                                    <Button Content="Test Without Cache" Click="TestExpensiveNoCacheClick" Margin="5,10,5,5"/>
                                    <TextBlock Text="{Binding ExpensiveNoCacheTime}" Foreground="Red" Margin="5"/>
                                </StackPanel>
                            </Border>

                            <Border Grid.Column="1" Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="âœ… With Caching:" FontWeight="Bold" Foreground="Green"/>
                                    <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap">
private static ConcurrentDictionary&lt;string, string&gt;
    _expensiveCache = new();

public object Convert(object value, ...)
{
    string input = (string)value;

    return _expensiveCache.GetOrAdd(input, key =>
    {
        // Only calculated once per unique input!
        var hash = ComputeHash(key);
        var result = ProcessData(hash);
        return FormatOutput(result);
    });
}
                                    </TextBlock>
                                    <Button Content="Test With Cache" Click="TestExpensiveCached_Click" Margin="5,10,5,5"/>
                                    <TextBlock Text="{Binding ExpensiveCachedTime}" Foreground="Green" Margin="5"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </GroupBox>

                    <GroupBox Grid.Row="1" Header="Performance Impact Demo">
                        <StackPanel>
                            <TextBlock Text="Simulating expensive converter operations (10ms per conversion):"
                                     FontWeight="Bold" Margin="5"/>

                            <StackPanel Orientation="Horizontal" Margin="5">
                                <TextBlock Text="Conversion Count:" Width="120"/>
                                <TextBox x:Name="ExpensiveCountTextBox" Text="100" Width="100" Margin="5,0"/>
                                <Button Content="Run Comparison" Click="RunExpensiveComparison_Click"/>
                            </StackPanel>

                            <Border Background="#FFF3E0" CornerRadius="5" Padding="15" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Results:" FontWeight="Bold" FontSize="14"/>
                                    <TextBlock Text="{Binding ExpensiveComparisonResults}"
                                             TextWrapping="Wrap" FontFamily="Consolas" FontSize="11" Margin="5"/>
                                </StackPanel>
                            </Border>

                            <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="Key Insights:" FontWeight="Bold"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                        â€¢ For expensive operations (database, file I/O, complex math), caching provides dramatic improvements
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                        â€¢ First call: Cache miss (slow), subsequent calls: Cache hit (instant)
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                        â€¢ Use ConcurrentDictionary for thread-safe caching
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                        â€¢ Consider cache size limits for unbounded inputs
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- Tab 4: Best Practices -->
            <TabItem Header="Best Practices">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <GroupBox Header="Caching Strategies">
                            <StackPanel>
                                <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="1. Simple Value Cache" FontWeight="Bold" Margin="0,0,0,5"/>
                                        <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap">
private static Dictionary&lt;InputType, OutputType&gt; _cache = new();

public object Convert(object value, ...)
{
    var input = (InputType)value;
    if (!_cache.TryGetValue(input, out var result))
    {
        result = PerformConversion(input);
        _cache[input] = result;
    }
    return result;
}
                                        </TextBlock>
                                    </StackPanel>
                                </Border>

                                <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="2. Thread-Safe Cache (ConcurrentDictionary)" FontWeight="Bold" Margin="0,0,0,5"/>
                                        <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap">
private static ConcurrentDictionary&lt;InputType, OutputType&gt; _cache = new();

public object Convert(object value, ...)
{
    var input = (InputType)value;
    return _cache.GetOrAdd(input, key => PerformConversion(key));
}
                                        </TextBlock>
                                    </StackPanel>
                                </Border>

                                <Border Background="White" CornerRadius="5" Padding="10" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="3. Bounded Cache (LRU)" FontWeight="Bold" Margin="0,0,0,5"/>
                                        <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap">
private static LruCache&lt;InputType, OutputType&gt; _cache = new(maxSize: 1000);

public object Convert(object value, ...)
{
    var input = (InputType)value;
    return _cache.GetOrAdd(input, key => PerformConversion(key));
}
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" FontSize="11" Foreground="Gray" Margin="5">
                                            Use bounded cache to prevent unlimited memory growth
                                        </TextBlock>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="When to Cache">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Background="#E8F5E9" CornerRadius="5" Padding="10" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="âœ… DO Cache When:" FontWeight="Bold" Foreground="Green"/>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Conversion is expensive (>1ms)
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Same values converted repeatedly
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Limited set of possible inputs
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Converter is stateless
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Output is immutable
                                        </TextBlock>
                                    </StackPanel>
                                </Border>

                                <Border Grid.Column="1" Background="#FFEBEE" CornerRadius="5" Padding="10" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="âŒ DON'T Cache When:" FontWeight="Bold" Foreground="Red"/>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Conversion is trivial (&lt;0.1ms)
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Unbounded input space
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Output depends on external state
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Each input is unique
                                        </TextBlock>
                                        <TextBlock TextWrapping="Wrap" FontSize="12" Margin="5">
                                            â€¢ Output includes current time/random values
                                        </TextBlock>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Common Converter Optimizations">
                            <StackPanel>
                                <Border Background="#E3F2FD" CornerRadius="5" Padding="10" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="Boolean to Visibility" FontWeight="Bold" Margin="0,0,0,5"/>
                                        <TextBlock TextWrapping="Wrap" FontSize="12">
                                            Cache Visibility.Visible and Visibility.Collapsed objects instead of creating new ones
                                        </TextBlock>
                                        <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap" Margin="5,5,5,0">
private static readonly object Visible = Visibility.Visible;
private static readonly object Collapsed = Visibility.Collapsed;
return (bool)value ? Visible : Collapsed;
                                        </TextBlock>
                                    </StackPanel>
                                </Border>

                                <Border Background="#E3F2FD" CornerRadius="5" Padding="10" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="String Formatting" FontWeight="Bold" Margin="0,0,0,5"/>
                                        <TextBlock TextWrapping="Wrap" FontSize="12">
                                            Cache formatted strings for common values
                                        </TextBlock>
                                        <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap" Margin="5,5,5,0">
private static Dictionary&lt;double, string&gt; _formatCache = new();
return _formatCache.TryGetValue(val, out var str) ? str
    : _formatCache[val] = $"${val:N2}";
                                        </TextBlock>
                                    </StackPanel>
                                </Border>

                                <Border Background="#E3F2FD" CornerRadius="5" Padding="10" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="Enum to String" FontWeight="Bold" Margin="0,0,0,5"/>
                                        <TextBlock TextWrapping="Wrap" FontSize="12">
                                            Cache enum.ToString() results
                                        </TextBlock>
                                        <TextBlock Style="{StaticResource CodeStyle}" TextWrapping="Wrap" Margin="5,5,5,0">
private static Dictionary&lt;Enum, string&gt; _enumCache = new();
return _enumCache.TryGetValue((Enum)value, out var str) ? str
    : _enumCache[(Enum)value] = value.ToString();
                                        </TextBlock>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Performance Guidelines">
                            <Border Background="White" CornerRadius="5" Padding="15" Margin="5">
                                <StackPanel>
                                    <TextBlock Text="ðŸ“Š Converter Performance Rules:" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                                    <TextBlock TextWrapping="Wrap" Margin="5">
                                        1. Converters are called frequently - optimize Convert() method
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" Margin="5">
                                        2. Use static caching for stateless converters
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" Margin="5">
                                        3. Consider singleton pattern to reduce memory
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" Margin="5">
                                        4. Avoid allocations in Convert() when possible
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" Margin="5">
                                        5. Use ConcurrentDictionary for thread safety
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" Margin="5">
                                        6. Implement cache eviction for unbounded inputs
                                    </TextBlock>
                                    <TextBlock TextWrapping="Wrap" Margin="5" FontWeight="Bold" Foreground="#2196F3">
                                        7. Measure before optimizing - not all converters need caching
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#424242" CornerRadius="5" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="{Binding StatusMessage}"
                          Foreground="White" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" Text="{Binding CurrentMemory, StringFormat='Memory: {0:N2} MB'}"
                          Foreground="#4CAF50" VerticalAlignment="Center" Margin="10,0,0,0"/>
            </Grid>
        </Border>
    </Grid>
</Window>
