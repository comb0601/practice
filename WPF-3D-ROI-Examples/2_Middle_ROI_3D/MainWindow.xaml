<Window x:Class="Middle_ROI_3D.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Middle 3D ROI - Multiple Shapes" Height="700" Width="1100"
        Background="#1E1E1E">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>

        <!-- ROI List Panel -->
        <Border Grid.Column="0" Background="#252526" Margin="5">
            <DockPanel>
                <TextBlock Text="ROI LIST"
                         DockPanel.Dock="Top"
                         Foreground="White"
                         FontSize="14"
                         FontWeight="Bold"
                         Margin="10"
                         HorizontalAlignment="Center"/>

                <StackPanel DockPanel.Dock="Bottom" Margin="5">
                    <Button Content="+ Add ROI"
                            Click="AddROI_Click"
                            Margin="5"
                            Padding="8"
                            Background="#0E639C"
                            Foreground="White"
                            BorderThickness="0"
                            FontWeight="Bold"/>
                    <Button Content="- Remove ROI"
                            Click="RemoveROI_Click"
                            Margin="5"
                            Padding="8"
                            Background="#A12026"
                            Foreground="White"
                            BorderThickness="0"
                            FontWeight="Bold"/>
                </StackPanel>

                <ListBox x:Name="roiListBox"
                         SelectionChanged="ROIList_SelectionChanged"
                         Background="#2D2D30"
                         Foreground="White"
                         BorderThickness="0"
                         Margin="5"/>
            </DockPanel>
        </Border>

        <!-- 3D Viewport -->
        <Border Grid.Column="1" Background="Black" Margin="5">
            <Viewport3D x:Name="viewport3D">
                <!-- Camera -->
                <Viewport3D.Camera>
                    <PerspectiveCamera x:Name="camera"
                                     Position="8,8,15"
                                     LookDirection="-8,-8,-15"
                                     UpDirection="0,1,0"
                                     FieldOfView="60"/>
                </Viewport3D.Camera>

                <!-- Lights -->
                <ModelVisual3D>
                    <ModelVisual3D.Content>
                        <Model3DGroup>
                            <AmbientLight Color="#505050"/>
                            <DirectionalLight Color="#FFFFFF" Direction="-1,-1,-3"/>
                            <DirectionalLight Color="#808080" Direction="1,1,3"/>
                            <DirectionalLight Color="#404040" Direction="0,-1,0"/>
                        </Model3DGroup>
                    </ModelVisual3D.Content>
                </ModelVisual3D>

                <!-- Grid Helper -->
                <ModelVisual3D x:Name="gridModel"/>

                <!-- ROI Container -->
                <ModelVisual3D x:Name="roiContainer"/>

            </Viewport3D>
        </Border>

        <!-- Properties Panel -->
        <Border Grid.Column="2" Background="#2D2D30" Margin="5">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel x:Name="propertiesPanel" Margin="15">
                    <TextBlock Text="ROI PROPERTIES"
                             Foreground="White"
                             FontSize="14"
                             FontWeight="Bold"
                             Margin="0,0,0,15"/>

                    <!-- Shape Selection -->
                    <TextBlock Text="SHAPE" Foreground="#4EC9B0" FontWeight="Bold" Margin="0,0,0,8"/>
                    <ComboBox x:Name="shapeCombo" SelectionChanged="Shape_Changed" Margin="0,0,0,15">
                        <ComboBoxItem Content="Box" Tag="Box"/>
                        <ComboBoxItem Content="Sphere" Tag="Sphere"/>
                        <ComboBoxItem Content="Cylinder" Tag="Cylinder"/>
                    </ComboBox>

                    <!-- Position -->
                    <TextBlock Text="POSITION" Foreground="#4EC9B0" FontWeight="Bold" Margin="0,5,0,8"/>

                    <TextBlock Text="X:" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtPosX" Text="0.0" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderPosX" Minimum="-8" Maximum="8" Value="0" ValueChanged="Property_Changed"/>
                    </DockPanel>

                    <TextBlock Text="Y:" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtPosY" Text="0.0" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderPosY" Minimum="-8" Maximum="8" Value="0" ValueChanged="Property_Changed"/>
                    </DockPanel>

                    <TextBlock Text="Z:" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtPosZ" Text="0.0" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderPosZ" Minimum="-8" Maximum="8" Value="0" ValueChanged="Property_Changed"/>
                    </DockPanel>

                    <!-- Size -->
                    <TextBlock Text="SIZE" Foreground="#4EC9B0" FontWeight="Bold" Margin="0,10,0,8"/>

                    <TextBlock Text="Width (X):" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtWidth" Text="2.0" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderWidth" Minimum="0.5" Maximum="6" Value="2" ValueChanged="Property_Changed"/>
                    </DockPanel>

                    <TextBlock Text="Height (Y):" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtHeight" Text="2.0" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderHeight" Minimum="0.5" Maximum="6" Value="2" ValueChanged="Property_Changed"/>
                    </DockPanel>

                    <TextBlock Text="Depth (Z):" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtDepth" Text="2.0" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderDepth" Minimum="0.5" Maximum="6" Value="2" ValueChanged="Property_Changed"/>
                    </DockPanel>

                    <!-- Rotation -->
                    <TextBlock Text="ROTATION" Foreground="#4EC9B0" FontWeight="Bold" Margin="0,10,0,8"/>

                    <TextBlock Text="Rotate X:" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtRotX" Text="0째" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderRotX" Minimum="0" Maximum="360" Value="0" ValueChanged="Property_Changed"/>
                    </DockPanel>

                    <TextBlock Text="Rotate Y:" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtRotY" Text="0째" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderRotY" Minimum="0" Maximum="360" Value="0" ValueChanged="Property_Changed"/>
                    </DockPanel>

                    <TextBlock Text="Rotate Z:" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtRotZ" Text="0째" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderRotZ" Minimum="0" Maximum="360" Value="0" ValueChanged="Property_Changed"/>
                    </DockPanel>

                    <!-- Appearance -->
                    <TextBlock Text="APPEARANCE" Foreground="#4EC9B0" FontWeight="Bold" Margin="0,10,0,8"/>

                    <TextBlock Text="Color:" Foreground="White" Margin="0,3,0,3" FontSize="11"/>
                    <ComboBox x:Name="colorCombo" SelectionChanged="Color_Changed" Margin="0,0,0,8">
                        <ComboBoxItem Content="Red" Tag="#FF0000"/>
                        <ComboBoxItem Content="Green" Tag="#00FF00"/>
                        <ComboBoxItem Content="Blue" Tag="#0000FF"/>
                        <ComboBoxItem Content="Yellow" Tag="#FFFF00"/>
                        <ComboBoxItem Content="Cyan" Tag="#00FFFF"/>
                        <ComboBoxItem Content="Magenta" Tag="#FF00FF"/>
                        <ComboBoxItem Content="Orange" Tag="#FF8000"/>
                        <ComboBoxItem Content="Purple" Tag="#8000FF"/>
                    </ComboBox>

                    <TextBlock Text="Opacity:" Foreground="White" Margin="0,8,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtOpacity" Text="50%" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderOpacity" Minimum="10" Maximum="100" Value="50" ValueChanged="Opacity_Changed"/>
                    </DockPanel>

                    <!-- Camera Controls -->
                    <TextBlock Text="CAMERA" Foreground="#4EC9B0" FontWeight="Bold" Margin="0,15,0,8"/>

                    <TextBlock Text="Orbit Angle:" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtCameraAngle" Text="0째" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderCameraAngle" Minimum="0" Maximum="360" Value="45" ValueChanged="Camera_Changed"/>
                    </DockPanel>

                    <TextBlock Text="Camera Height:" Foreground="White" Margin="0,3,0,2" FontSize="11"/>
                    <DockPanel Margin="0,0,0,8">
                        <TextBlock x:Name="txtCameraHeight" Text="8.0" Foreground="White" Width="35" DockPanel.Dock="Right" TextAlignment="Right" FontSize="11"/>
                        <Slider x:Name="sliderCameraHeight" Minimum="2" Maximum="20" Value="8" ValueChanged="Camera_Changed"/>
                    </DockPanel>

                    <TextBlock Text="Middle Version"
                             Foreground="#666"
                             FontSize="10"
                             Margin="0,20,0,0"
                             HorizontalAlignment="Center"/>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>
