<Window x:Class="Lesson04_Transformations.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Lesson 1.4 - Basic Transformations" Height="700" Width="1000"
        Background="#1E1E1E">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2D2D30" Padding="10">
            <StackPanel>
                <TextBlock Text="Lesson 1.4: Basic Transformations"
                          FontSize="20" FontWeight="Bold" Foreground="White"/>
                <TextBlock Text="Learn to translate, rotate, and scale 3D objects"
                          FontSize="12" Foreground="#A0A0A0" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- 3D Viewport -->
            <Border Grid.Column="0" BorderBrush="#3E3E42" BorderThickness="1">
                <Viewport3D x:Name="mainViewport">
                    <Viewport3D.Camera>
                        <PerspectiveCamera Position="0,3,10" LookDirection="0,-3,-10"
                                         UpDirection="0,1,0" FieldOfView="60"/>
                    </Viewport3D.Camera>

                    <!-- Lights -->
                    <ModelVisual3D>
                        <ModelVisual3D.Content>
                            <AmbientLight Color="#404040"/>
                        </ModelVisual3D.Content>
                    </ModelVisual3D>
                    <ModelVisual3D>
                        <ModelVisual3D.Content>
                            <DirectionalLight Color="White" Direction="-1,-1,-1"/>
                        </ModelVisual3D.Content>
                    </ModelVisual3D>

                    <!-- Transform Demo Cube -->
                    <ModelVisual3D x:Name="demoCube">
                        <ModelVisual3D.Content>
                            <GeometryModel3D x:Name="cubeModel">
                                <GeometryModel3D.Geometry>
                                    <MeshGeometry3D x:Name="cubeMesh"
                                        Positions="-1,1,1  1,1,1  1,-1,1  -1,-1,1
                                                   -1,1,-1  1,1,-1  1,-1,-1  -1,-1,-1"
                                        TriangleIndices="0,1,2  0,2,3  1,5,6  1,6,2
                                                        5,4,7  5,7,6  4,0,3  4,3,7
                                                        4,5,1  4,1,0  3,2,6  3,6,7"/>
                                </GeometryModel3D.Geometry>
                                <GeometryModel3D.Material>
                                    <DiffuseMaterial Brush="#007ACC"/>
                                </GeometryModel3D.Material>
                            </GeometryModel3D>
                        </ModelVisual3D.Content>

                        <!-- Transform Group -->
                        <ModelVisual3D.Transform>
                            <Transform3DGroup x:Name="transformGroup">
                                <ScaleTransform3D x:Name="scaleTransform" ScaleX="1" ScaleY="1" ScaleZ="1"/>
                                <RotateTransform3D>
                                    <RotateTransform3D.Rotation>
                                        <AxisAngleRotation3D x:Name="rotationX" Axis="1,0,0" Angle="0"/>
                                    </RotateTransform3D.Rotation>
                                </RotateTransform3D>
                                <RotateTransform3D>
                                    <RotateTransform3D.Rotation>
                                        <AxisAngleRotation3D x:Name="rotationY" Axis="0,1,0" Angle="0"/>
                                    </RotateTransform3D.Rotation>
                                </RotateTransform3D>
                                <RotateTransform3D>
                                    <RotateTransform3D.Rotation>
                                        <AxisAngleRotation3D x:Name="rotationZ" Axis="0,0,1" Angle="0"/>
                                    </RotateTransform3D.Rotation>
                                </RotateTransform3D>
                                <TranslateTransform3D x:Name="translateTransform" OffsetX="0" OffsetY="0" OffsetZ="0"/>
                            </Transform3DGroup>
                        </ModelVisual3D.Transform>
                    </ModelVisual3D>

                    <!-- Ground Plane -->
                    <ModelVisual3D>
                        <ModelVisual3D.Content>
                            <GeometryModel3D>
                                <GeometryModel3D.Geometry>
                                    <MeshGeometry3D Positions="-10,-2,-10  10,-2,-10  10,-2,10  -10,-2,10"
                                                   TriangleIndices="0,1,2  0,2,3"/>
                                </GeometryModel3D.Geometry>
                                <GeometryModel3D.Material>
                                    <DiffuseMaterial Brush="#2D2D30"/>
                                </GeometryModel3D.Material>
                            </GeometryModel3D>
                        </ModelVisual3D.Content>
                    </ModelVisual3D>

                </Viewport3D>
            </Border>

            <GridSplitter Grid.Column="1" Width="5" Background="#3E3E42"/>

            <!-- Control Panel -->
            <Border Grid.Column="2" Background="#252526" Padding="10">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <!-- Translation Controls -->
                        <TextBlock Text="Translation (Position)" FontSize="16" FontWeight="Bold"
                                  Foreground="White" Margin="0,0,0,10"/>

                        <TextBlock Text="X Position:" Foreground="#A0A0A0" Margin="0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="sliderTranslateX" Minimum="-5" Maximum="5" Value="0"
                                   ValueChanged="Transform_Changed"/>
                            <TextBlock Grid.Column="1" Text="{Binding Value, ElementName=sliderTranslateX, StringFormat='{}{0:F1}'}"
                                      Foreground="#4EC9B0" TextAlignment="Right" Margin="5,0,0,0"/>
                        </Grid>

                        <TextBlock Text="Y Position:" Foreground="#A0A0A0" Margin="0,10,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="sliderTranslateY" Minimum="-5" Maximum="5" Value="0"
                                   ValueChanged="Transform_Changed"/>
                            <TextBlock Grid.Column="1" Text="{Binding Value, ElementName=sliderTranslateY, StringFormat='{}{0:F1}'}"
                                      Foreground="#4EC9B0" TextAlignment="Right" Margin="5,0,0,0"/>
                        </Grid>

                        <TextBlock Text="Z Position:" Foreground="#A0A0A0" Margin="0,10,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="sliderTranslateZ" Minimum="-5" Maximum="5" Value="0"
                                   ValueChanged="Transform_Changed"/>
                            <TextBlock Grid.Column="1" Text="{Binding Value, ElementName=sliderTranslateZ, StringFormat='{}{0:F1}'}"
                                      Foreground="#4EC9B0" TextAlignment="Right" Margin="5,0,0,0"/>
                        </Grid>

                        <Separator Margin="0,20" Background="#3E3E42"/>

                        <!-- Rotation Controls -->
                        <TextBlock Text="Rotation (Degrees)" FontSize="16" FontWeight="Bold"
                                  Foreground="White" Margin="0,0,0,10"/>

                        <TextBlock Text="Rotate X (Pitch):" Foreground="#A0A0A0" Margin="0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="sliderRotateX" Minimum="-180" Maximum="180" Value="0"
                                   ValueChanged="Transform_Changed"/>
                            <TextBlock Grid.Column="1" Text="{Binding Value, ElementName=sliderRotateX, StringFormat='{}{0:F0}°'}"
                                      Foreground="#4EC9B0" TextAlignment="Right" Margin="5,0,0,0"/>
                        </Grid>

                        <TextBlock Text="Rotate Y (Yaw):" Foreground="#A0A0A0" Margin="0,10,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="sliderRotateY" Minimum="-180" Maximum="180" Value="0"
                                   ValueChanged="Transform_Changed"/>
                            <TextBlock Grid.Column="1" Text="{Binding Value, ElementName=sliderRotateY, StringFormat='{}{0:F0}°'}"
                                      Foreground="#4EC9B0" TextAlignment="Right" Margin="5,0,0,0"/>
                        </Grid>

                        <TextBlock Text="Rotate Z (Roll):" Foreground="#A0A0A0" Margin="0,10,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="sliderRotateZ" Minimum="-180" Maximum="180" Value="0"
                                   ValueChanged="Transform_Changed"/>
                            <TextBlock Grid.Column="1" Text="{Binding Value, ElementName=sliderRotateZ, StringFormat='{}{0:F0}°'}"
                                      Foreground="#4EC9B0" TextAlignment="Right" Margin="5,0,0,0"/>
                        </Grid>

                        <Separator Margin="0,20" Background="#3E3E42"/>

                        <!-- Scale Controls -->
                        <TextBlock Text="Scale (Size)" FontSize="16" FontWeight="Bold"
                                  Foreground="White" Margin="0,0,0,10"/>

                        <CheckBox x:Name="chkUniformScale" Content="Uniform Scale"
                                 Foreground="White" IsChecked="True" Margin="0,5"/>

                        <TextBlock Text="Scale X:" Foreground="#A0A0A0" Margin="0,10,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="sliderScaleX" Minimum="0.1" Maximum="3" Value="1"
                                   ValueChanged="Scale_Changed"/>
                            <TextBlock Grid.Column="1" Text="{Binding Value, ElementName=sliderScaleX, StringFormat='{}{0:F1}'}"
                                      Foreground="#4EC9B0" TextAlignment="Right" Margin="5,0,0,0"/>
                        </Grid>

                        <TextBlock Text="Scale Y:" Foreground="#A0A0A0" Margin="0,10,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="sliderScaleY" Minimum="0.1" Maximum="3" Value="1"
                                   ValueChanged="Scale_Changed"/>
                            <TextBlock Grid.Column="1" Text="{Binding Value, ElementName=sliderScaleY, StringFormat='{}{0:F1}'}"
                                      Foreground="#4EC9B0" TextAlignment="Right" Margin="5,0,0,0"/>
                        </Grid>

                        <TextBlock Text="Scale Z:" Foreground="#A0A0A0" Margin="0,10,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="sliderScaleZ" Minimum="0.1" Maximum="3" Value="1"
                                   ValueChanged="Scale_Changed"/>
                            <TextBlock Grid.Column="1" Text="{Binding Value, ElementName=sliderScaleZ, StringFormat='{}{0:F1}'}"
                                      Foreground="#4EC9B0" TextAlignment="Right" Margin="5,0,0,0"/>
                        </Grid>

                        <Separator Margin="0,20" Background="#3E3E42"/>

                        <!-- Animation -->
                        <TextBlock Text="Animation" FontSize="16" FontWeight="Bold"
                                  Foreground="White" Margin="0,0,0,10"/>

                        <Button x:Name="btnAnimate" Content="Start Animation" Click="Animate_Click"
                               Padding="10,5" Margin="0,5"/>

                        <Button Content="Reset All" Click="Reset_Click"
                               Padding="10,5" Margin="0,5"/>

                    </StackPanel>
                </ScrollViewer>
            </Border>

        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#2D2D30" Padding="10">
            <TextBlock Foreground="#A0A0A0">
                <Run Text="Transform Order: Scale → Rotate → Translate  |  Experiment with different combinations"/>
            </TextBlock>
        </Border>

    </Grid>

    <!-- Animation Storyboard -->
    <Window.Resources>
        <Storyboard x:Key="AnimationStoryboard" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="rotationY"
                           Storyboard.TargetProperty="Angle"
                           From="0" To="360" Duration="0:0:4"/>
            <DoubleAnimation Storyboard.TargetName="translateTransform"
                           Storyboard.TargetProperty="OffsetY"
                           From="0" To="2" Duration="0:0:2"
                           AutoReverse="True" RepeatBehavior="Forever"/>
        </Storyboard>
    </Window.Resources>

</Window>
